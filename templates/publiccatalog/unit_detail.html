{% extends 'publicsite/base_public.html' %}

{% block title %}{{ unit.title }} â€” {{ subject.name }} â€” Chatake Innoworks{% endblock %}

{% block content %}
<style>
    .breadcrumb {
        background: #F7F6F3;
        padding: 1rem 1.5rem;
        margin-bottom: 0;
        font-size: 0.9rem;
    }

    .breadcrumb a {
        color: #7A1F2B;
        text-decoration: none;
    }

    .breadcrumb a:hover {
        color: #B08D57;
    }

    .unit-header {
        background: #2E2E2E;
        color: #F7F6F3;
        padding: 3rem 1.5rem;
        border-bottom: 3px solid #B08D57;
    }

    .unit-header-content {
        max-width: 1200px;
        margin: 0 auto;
    }

    .unit-header h1 {
        font-size: 2.5rem;
        margin: 0;
        font-family: 'Merriweather', serif;
    }

    .unit-header .breadcrumbs {
        color: #B08D57;
        margin-top: 0.5rem;
        font-size: 0.95rem;
    }

    .unit-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 3rem 1.5rem;
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 2rem;
    }

    .notes-main {
        grid-column: 1;
    }

    .notes-sidebar {
        grid-column: 2;
    }

    .notes-grid {
        display: grid;
        gap: 1.5rem;
    }

    .note-card {
        background: #FFFFFF;
        border: 1px solid #EEEBE5;
        border-left: 4px solid #7A1F2B;
        border-radius: 4px;
        padding: 2rem;
        transition: all 0.3s ease;
    }

    .note-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }

    .note-card h3 {
        color: #2E2E2E;
        font-size: 1.25rem;
        margin: 0 0 0.5rem 0;
        font-family: 'Merriweather', serif;
    }

    .note-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.85rem;
        color: #999;
        margin-bottom: 1rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid #EEEBE5;
    }

    .note-card p {
        color: #666;
        font-size: 0.95rem;
        margin: 0 0 1.5rem 0;
        line-height: 1.6;
    }

    .note-link {
        display: inline-block;
        color: #7A1F2B;
        text-decoration: none;
        font-weight: 600;
        padding: 0.75rem 1.5rem;
        border: 2px solid #7A1F2B;
        border-radius: 4px;
        transition: all 0.3s ease;
    }

    .note-link:hover {
        background-color: #7A1F2B;
        color: #FFFFFF;
    }

    .sidebar-card {
        background: #F7F6F3;
        border: 1px solid #EEEBE5;
        border-radius: 4px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .sidebar-card h4 {
        color: #2E2E2E;
        font-size: 0.9rem;
        margin: 0 0 1rem 0;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 700;
    }

    .sidebar-card ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-card li {
        margin-bottom: 0.75rem;
    }

    .sidebar-card a {
        color: #7A1F2B;
        text-decoration: none;
        font-size: 0.9rem;
        transition: all 0.3s ease;
    }

    .sidebar-card a:hover {
        color: #B08D57;
    }

    @media (max-width: 768px) {
        .unit-header h1 {
            font-size: 1.75rem;
        }

        .unit-content {
            grid-template-columns: 1fr;
        }

        .notes-sidebar {
            grid-column: 1;
        }
    }
</style>

<div class="breadcrumb">
    <a href="{% url 'publiccatalog:course_list' %}">Courses</a>
    / <a href="{% url 'publiccatalog:course_detail' course.slug %}">{{ course.name }}</a>
    / <a href="{% url 'publiccatalog:subject_detail' course.slug subject.slug %}">{{ subject.name }}</a>
    / <strong>Unit {{ unit.unit_number }}</strong>
</div>

<div class="unit-header">
    <div class="unit-header-content">
        <h1>{{ unit.title }}</h1>
        <p class="breadcrumbs">Unit {{ unit.unit_number }} â†’ {{ subject.name }} â†’ {{ course.name }}</p>
    </div>
</div>

<div class="unit-content">
    <div class="notes-main">
        <h2 style="font-size: 1.5rem; color: #2E2E2E; font-family: 'Merriweather', serif;">Notes & Materials</h2>
        <p style="color: #666; margin-bottom: 2rem;">
            {{ notes.count }} note{{ notes.count|pluralize }} available
        </p>

        {% if notes %}
            <div class="notes-grid">
                {% for note in notes %}
                    <div class="note-card">
                        <h3>{{ note.title }}</h3>
                        <div class="note-meta">
                            <span>{{ note.created_at|date:"M d, Y" }}</span>
                            {% if note.file %}
                                <span>ðŸ“„ {{ note.file.name|slice:"-4:" }}</span>
                            {% endif %}
                        </div>
                        <p>{{ note.content|truncatewords:30|safe }}</p>
                        <a href="{% url 'publiccatalog:note_detail' note.id %}" class="note-link">
                            Read Note â†’
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="text-align: center; padding: 3rem; background: #F7F6F3; border-radius: 8px;">
                <p style="color: #666;">No notes available for this unit yet.</p>
            </div>
        {% endif %}
    </div>

    <div class="notes-sidebar">
        <div class="sidebar-card">
            <h4>Course Info</h4>
            <ul>
                <li><strong style="color: #2E2E2E;">{{ course.name }}</strong></li>
                <li><a href="{% url 'publiccatalog:course_detail' course.slug %}">View Course</a></li>
            </ul>
        </div>

        <div class="sidebar-card">
            <h4>Subject</h4>
            <ul>
                <li><strong style="color: #2E2E2E;">{{ subject.name }}</strong></li>
                <li><a href="{% url 'publiccatalog:subject_detail' course.slug subject.slug %}">View Subject</a></li>
            </ul>
        </div>

        <div class="sidebar-card">
            <h4>Quick Links</h4>
            <ul>
                <li><a href="{% url 'publiccatalog:course_list' %}">All Courses</a></li>
                <li><a href="{% url 'publicsite:home' %}">Home</a></li>
                <li><a href="{% url 'publicsite:contact' %}">Contact Us</a></li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
